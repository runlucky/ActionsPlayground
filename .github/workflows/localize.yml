name: CheckLocalize

on:
  push:
    paths:
      - 'ActionsPlayground/Localizable/**'

jobs:
  build:
    name: Run Localizer
    runs-on: macos-latest

    steps:
      - name: Checkout
        uses: actions/checkout@master

      - name: Localize
        run: |
          echo "処理開始"
          ActionsPlayground/Localizable/Localizer
          result=$?
          if [ $result -eq 0] ; then
            echo "ok"
          else
            echo "ng"
          fi
          echo "終了"

      - name: Slack notification
        if: failure()
        env:
          SLACK_WEBHOOK: ${{ secrets.SLACK_WEBHOOK }}
          SLACK_USERNAME: ThisIsMyUsername # Optional.
          #SLACK_CHANNEL: general # Optional.
          #SLACK_OVERRIDE_MESSAGE: 'Custom message' # Optional.
        uses: Ilshidur/action-slack@master
        with:
          args: 'A new commit has been pushed.'
